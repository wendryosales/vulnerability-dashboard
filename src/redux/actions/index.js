import {
  CARDS, CHARTS, LOGGED_IN, RECEIVE_HOSTS, REQUEST_HOSTS, TOKEN,
} from './actionsTypes';
import BASE_URL from './BASE_URL';

export const loggedInAction = (value) => ({ type: LOGGED_IN, value });
export const tokenAction = (value) => ({ type: TOKEN, value });

export const cardsAction = (value) => ({ type: CARDS, value });
export const chartsAction = (value) => ({ type: CHARTS, value });

const requestHosts = () => ({ type: REQUEST_HOSTS });
const receiveHosts = (value) => ({
  type: RECEIVE_HOSTS,
  value,
});

export function fetchHosts(token) {
  const URL = `${BASE_URL}/api/assets/`;
  return async (dispatch) => {
    dispatch(requestHosts());
    const response = await fetch(URL, {
      method: 'get',
      headers: {
        Authorization: `Token ${token}`,
      },
    });
    const hosts = await response.json();
    return dispatch(receiveHosts(hosts));
  };
}
