import BASE_URL from './BASE_URL';

/**
* Card API requests.
* @param {string} token
* @param {string} cardType Accept cardTypes: 'total_hosts', 'total_vulnerabilities', 'average_risk'
* @return {Promise<Data>} Promise object with the data request.
*/
const getCards = async (token, cardType) => {
  let URL = '';
  switch (cardType) {
    case 'total_hosts':
      URL = `${BASE_URL}/api/dashboard/cards/asset`;
      break;
    case 'total_vulnerabilities':
      URL = `${BASE_URL}/api/dashboard/cards/vulnerability`;
      break;
    case 'average_risk':
      URL = `${BASE_URL}/api/dashboard/cards/risk`;
      break;
    default:
      break;
  }
  const response = await fetch(URL, {
    method: 'get',
    headers: {
      Authorization: `Token ${token}`,
    },
  });
  return response.json();
};

export default getCards;
