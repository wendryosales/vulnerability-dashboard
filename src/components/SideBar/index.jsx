import React, { useState } from 'react';
import { AiOutlineMenuFold, AiOutlineMenuUnfold } from 'react-icons/ai';
import { CgGhost, CgLogOut } from 'react-icons/cg';
import { MdBugReport } from 'react-icons/md';
import { RiDashboard3Line } from 'react-icons/ri';
import { useDispatch } from 'react-redux';
import { NavLink } from 'react-router-dom';
import { clearToken, loggedInAction } from '../../redux/actions';
import Style from './SideBar.module.css';

function SideBar() {
  const [sideBarIsOpen, setSideBarIsOpen] = useState(false);
  const dispatch = useDispatch();
  const openSideBar = () => {
    setSideBarIsOpen((previousState) => !previousState);
  };

  const loggout = () => {
    dispatch(loggedInAction(false));
    dispatch(clearToken());
  };

  return (
    <div className={sideBarIsOpen ? `${Style.container} ${Style.active}` : Style.container}>
      <button
        type="button"
        className={Style.openSideBarBtn}
        onClick={openSideBar}
      >
        {
          sideBarIsOpen ? <AiOutlineMenuFold /> : <AiOutlineMenuUnfold />
        }
      </button>
      <nav className={sideBarIsOpen ? `${Style.navlinks} ${Style.active}` : Style.navlinks}>
        <NavLink to="/dashboard">
          <RiDashboard3Line />
          <p>Dashboard</p>
        </NavLink>
        <NavLink to="/hosts">
          <CgGhost />
          <p>Hosts</p>
        </NavLink>
        <NavLink to="/vulnerabilities.">
          <MdBugReport />
          <p>Vulnerabilidades</p>
        </NavLink>
      </nav>
      <button
        className={sideBarIsOpen ? `${Style.loggoutBtn} ${Style.active}` : Style.loggoutBtn}
        type="button"
        onClick={loggout}
      >
        <CgLogOut />
        <p>Sair</p>
      </button>
    </div>
  );
}

export default SideBar;
